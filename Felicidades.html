<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Next:ital,wght@0,200..800;1,200..800&family=Jersey+10&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Micro+5&family=Pixelify+Sans:wght@400..700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Sigmar&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="stylesFelicidades.css">
</head>
<body>
    <div class="gif-overlay"></div>
    <div class="victory-container">
        <h1 class="victory-text">¡FELICIDADES!</h1><h1 id="namewin" class="victory-text"></h1>
        <button id="back-button" onclick="window.location.href='index1.html'">Volver al Menú ↩</button>
    </div>

    <audio id="audioPlayer" autoplay>
        <source src="/Mp3AMLo/Audacity/FuegosArtificiales.mp3" type="audio/mp3"></source>
    </audio>
    <script>
        let players = JSON.parse(localStorage.getItem('players')) || [];

    let name= sessionStorage.getItem('tempname');
   let score=parseInt(sessionStorage.getItem('Score'));
    //aqui debemos de establecer de nuevo el nombre y mandar el score
    // let score = Math.floor(Math.random() * 100) + 1; 
    let playerIndex = players.findIndex(player => player.name === name);
    document.getElementById("namewin").innerHTML=name
    let fechao=new Date();
    if (playerIndex !== -1) {
        // Si el jugador ya existe, actualizar solo si el nuevo score es mayor
        if (score > players[playerIndex].score) {
            players[playerIndex].score = score;
            players[playerIndex].fecha = fechao;
            console.log(`Nuevo puntaje más alto para ${name}: ${score}`);
        } else {
            console.log(`El puntaje ${score} no es mayor al actual (${players[playerIndex].score}). No se actualiza.`);
             
        }
    } else {
        // Si no existe, agregar nuevo jugador
        players.push({ name, score,fechao });
        console.log(`Nuevo jugador agregado: ${name}, Puntaje: ${score}`);
    }

    localStorage.setItem('players', JSON.stringify(players));
    
    //mandamos a la de records


    </script>
    
</body>
</html>
