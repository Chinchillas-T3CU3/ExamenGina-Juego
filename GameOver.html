<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Next:ital,wght@0,200..800;1,200..800&family=Jersey+10&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Micro+5&family=Pixelify+Sans:wght@400..700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Sigmar&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="stylesGameOver.css">
</head>
<body>
    <div class="bullet-holes">
        <div class="hole" style="top: 10%; left: 20%;"></div>
        <div class="hole" style="top: 30%; left: 50%;"></div>
        <div class="hole" style="top: 50%; left: 70%;"></div>
        <div class="hole" style="top: 70%; left: 30%;"></div>
        <div class="hole" style="top: 85%; left: 60%;"></div>
        <div class="hole" style="top: 20%; left: 80%;"></div>
        <div class="hole" style="top: 60%; left: 10%;"></div>
        <div class="hole" style="top: 40%; left: 90%;"></div>
    </div>
    <div class="game-over-container">
        <h1 class="game-over-text">GAME OVER </h1>
        <button id="back-button" onclick="window.location.href='index1.html'">Siguiente ↩</button>
    </div>
    
    <audio id="audioPlayer" autoplay>
        <source src="/Mp3AMLo/Audacity/gunshot.mp3" type="audio/mp3"></source>
    </audio>




    <script>
        let players = JSON.parse(localStorage.getItem('players')) || [];

    let name= sessionStorage.getItem('tempname');
   let score=parseInt(sessionStorage.getItem('Score'));
    //aqui debemos de establecer de nuevo el nombre y mandar el score
    // let score = Math.floor(Math.random() * 100) + 1; 
    let playerIndex = players.findIndex(player => player.name === name);
    let fechao=new Date();

    if (playerIndex !== -1) {
        // Si el jugador ya existe, actualizar solo si el nuevo score es mayor
        if (score > players[playerIndex].score) {
            players[playerIndex].score = score;
            players[playerIndex].fecha = fechao;
            console.log(`Nuevo puntaje más alto para ${name}: ${score}`);
        } else {
            console.log(`El puntaje ${score} no es mayor al actual (${players[playerIndex].score}). No se actualiza.`);
            
        }
    } else {
        // Si no existe, agregar nuevo jugador
        players.push({ name, score,fechao });
        console.log(`Nuevo jugador agregado: ${name}, Puntaje: ${score}`);
    }

    localStorage.setItem('players', JSON.stringify(players));
    
    //mandamos a la de records


    </script>
</body>
</html>
